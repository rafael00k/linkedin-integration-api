import axios from "axios";
import { LinkedinProfileOutput } from "../presentation/dto/linkedin.profile.dto";
import { profileMapperToDB } from "../mapper/linkedin.mapper";
import { ProfileDatabase } from "./profile.datasource";
import { Profile } from "../core/entity/profile.entity";
import {promises} from 'fs'

export class LinkedinDataSource {
    constructor(
        
    ) {
        
    }
    async getProfile(url: string): Promise<LinkedinProfileOutput> {
        const profileDataSource = new ProfileDatabase()
        const rawProfile = "{\"public_identifier\":\"rafael-ferraz-rodrigues\",\"profile_pic_url\":\"https://s3.us-west-000.backblazeb2.com/proxycurl/person/rafael-ferraz-rodrigues/profile?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=0004d7f56a0400b0000000001%2F20230408%2Fus-west-000%2Fs3%2Faws4_request&X-Amz-Date=20230408T194531Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=13757d3105f01a87896d7e9ac25613f973e9e225db82de03c6ef05c02a5bf595\",\"background_cover_image_url\":\"https://s3.us-west-000.backblazeb2.com/proxycurl/person/rafael-ferraz-rodrigues/cover?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=0004d7f56a0400b0000000001%2F20230408%2Fus-west-000%2Fs3%2Faws4_request&X-Amz-Date=20230408T194531Z&X-Amz-Expires=3600&X-Amz-SignedHeaders=host&X-Amz-Signature=42969f44a7f246a0532c58bc883fa51730655aeec74fbd4a85edf9956852e3b0\",\"first_name\":\"RafaelFerraz\",\"last_name\":\"Rodrigues\",\"full_name\":\"RafaelFerrazRodrigues\",\"follower_count\":404,\"occupation\":\" kotlin Engenheirodesoftwarepleno-DesenvolvedorBackendatOutsmartDigital\",\"headline\":\"DesenvolvedorBackend|NodeJS|Javascript|Typescript|AWS|NestJS|Express|PostgreSQL|NoSQL|\",\"summary\":\" sumario Desenvolvedorbackendcom3anosdeexperi\\u00eanciaemdesenvolvimentodesoftware.EspecialistaemNodeJsutilizandoJavascriptetypescriptcomexperi\\u00eanciaemRuby,al\\u00e9mdeterconhecimentoemframeworkscomoNestJs,ExpresseRubyonRails.PossuohabilidadesembancosdedadosSQL(PostgreSQL)eNoSQL(DynamoDB)al\\u00e9mdepossuirconhecimentoemservi\\u00e7osAWS(EC2,S3,Lambda)eDocker.Tenhoexperi\\u00eancianousodemetodologias\\u00e1geiscomoScrumeKanban.\\n\\nJ\\u00e1participeiemprojetosdesafiadores,comoaimplementa\\u00e7\\u00e3odeumasolu\\u00e7\\u00e3odepagamentosonline,cria\\u00e7\\u00e3odeumsistemadem\\u00e9tricasutilizandoElasticsearcheapadroniza\\u00e7\\u00e3odeumabasedadadosSQLparaoCensodeEduca\\u00e7\\u00e3odoensinosuperior\\n\\nQuiserconversar,fiqueavontade!\\ncontato:rferrazrodrigues@gmail.com\",\"country\":\"BR\",\"country_full_name\":\"Estonia\",\"city\":\"Campinas\",\"state\":\"S\\u00e3oPaulo\",\"experiences\":[{\"starts_at\":{\"day\":1,\"month\":11,\"year\":2022},\"ends_at\":null,\"company\":\"OutsmartDigital\",\"company_linkedin_profile_url\":\"https://br.linkedin.com/company/outsmartdigitalbr\",\"title\":\"Engenheirodesoftwarepleno-DesenvolvedorBackend\",\"description\":\"-DesenvolvimentodeAPIsutilizandoutilizandoNestJscomTypescript;\\n\\n-Cria\\u00e7\\u00e3odeendpointsparaprocessamentodedadosemCSV;\\n\\n-TrabalhandocominfraestruturaAWS(EC2,SQS,CloudWatch);\\n\\n-DesenvolvimentodeApi'semRuby/RubyonRails;\\n\\n-Utiliza\\u00e7\\u00e3odeDockerparaContaineriza\\u00e7\\u00e3odeAplica\\u00e7\\u00f5es;\\n\\n-Utiliza\\u00e7\\u00e3odeGRPCparacomunica\\u00e7\\u00e3odemicro-servi\\u00e7os\",\"location\":\"S\\u00e3oPaulo,Brasil\",\"logo_url\":\"https://media.licdn.com/dms/image/C4E0BAQE_P8xAJ6AXhQ/company-logo_100_100/0/1623363793509?e=2147483647&v=beta&t=zreFHewVGGhVdh3DLm0bIDhG30x1nl1r3yqeUfLCPMU\"},{\"starts_at\":{\"day\":1,\"month\":4,\"year\":2021},\"ends_at\":{\"day\":30,\"month\":11,\"year\":2022},\"company\":\"OutsmartDigital\",\"company_linkedin_profile_url\":\"https://br.linkedin.com/company/outsmartdigitalbr\",\"title\":\"elixir Engenheirodesoftwarej\\u00fanior-DesenvolvedorBackend\",\"description\":\"-DesenvolvimentodeAPIsnodeutilizandoexpresscomTypescript;\\n\\n-DesenvolvimentodeAPIsServlessnaaws(utilizandoServlessframework);\\n\\n-Atualiza\\u00e7\\u00e3odeInfraAWSutilizandoTerraform;\\n\\n-Utiliza\\u00e7\\u00e3odeGraphql(QuerieseMutations)paraexposi\\u00e7\\u00e3odeendpoints;\\n\\n-Utiliza\\u00e7\\u00e3odoElasticsearchparacria\\u00e7\\u00e3odeplataformadeanalisedem\\u00e9tricas(Utilizandoaggregations)efeaturedebuscacomautocomplete;\\n\\n-Utiliza\\u00e7\\u00e3odeBancoNoSQL(AWSDynamoDB);\\n\\n-Implementa\\u00e7\\u00e3odesistemadePagamentos,desenvolvendoumaintegra\\u00e7\\u00e3ocomaplataformaSTRIPE\\n\\n\\n\\n\\n\\n\\nExibirmenos\",\"location\":null,\"logo_url\":\"https://media.licdn.com/dms/image/C4E0BAQE_P8xAJ6AXhQ/company-logo_100_100/0/1623363793509?e=2147483647&v=beta&t=zreFHewVGGhVdh3DLm0bIDhG30x1nl1r3yqeUfLCPMU\"},{\"starts_at\":{\"day\":1,\"month\":12,\"year\":2020},\"ends_at\":{\"day\":31,\"month\":3,\"year\":2021},\"company\":\"HIRIXSoftware&Technology\",\"company_linkedin_profile_url\":\"https://br.linkedin.com/company/hirix-technology-software\",\"title\":\"Desenvolvedorweb\",\"description\":\"Atua\\u00e7\\u00e3onoFluxodesustenta\\u00e7\\u00e3odosSIG's(SistemasIntegradosdeGestao:http://hirix.com.br/sigufrn/),analisandoasdemandasrecebidas,atribuindoeorientandoaosestagi\\u00e1riosdosetoresolucionandoosproblemasdesustenta\\u00e7\\u00e3odemaiorcomplexidade,alinhadoaosetorde\\\"Neg\\u00f3cio\\\";\\n\\nTecnologiasUtilizadas:JAVA,J2EE,JSF,Hibernate,Bancos:PostgreSQLeOracle,JBoss,Javascript,maven,htmlecss,git.\",\"location\":null,\"logo_url\":\"https://media.licdn.com/dms/image/C4D0BAQFp7rjJOWKGlw/company-logo_100_100/0/1651245959309?e=2147483647&v=beta&t=HCBuiMarFM1QddN1YlghO1hfD2fgkliTxXg7_VPNi2A\"},{\"starts_at\":{\"day\":1,\"month\":9,\"year\":2019},\"ends_at\":{\"day\":30,\"month\":4,\"year\":2020},\"company\":\"HIRIXSoftwareEngineering\",\"company_linkedin_profile_url\":\"https://br.linkedin.com/company/hirix-technology-software\",\"title\":\"Desenvolvedorj\\u00fanior\",\"description\":\"Atua\\u00e7\\u00e3onoFluxodesustenta\\u00e7\\u00e3odosSIG's(SistemasIntegradosdeGestao:http://hirix.com.br/sigufrn/),analisandoasdemandasrecebidas,atribuindoeorientandoaosestagi\\u00e1riosdosetoresolucionandoosproblemasdesustenta\\u00e7\\u00e3odemaiorcomplexidade,alinhadoaosetorde\\\"Neg\\u00f3cio\\\";Consultoriaemelabora\\u00e7\\u00e3odeconsultasSQLpararealiza\\u00e7\\u00e3odoCensodaEduca\\u00e7\\u00e3oSuperior-INEP;Aux\\u00edlionaimplanta\\u00e7\\u00e3odem\\u00f3dulos.\\nTecnologiasUtilizadas:JAVA,J2EE,JSF,Hibernate,Bancos:PostgreSQLeOracle,JBoss,Javascript,maven,htmlecss,git.\\n\\n\\n\\n\\n\\n\\nExibirmenos\",\"location\":\"NataleRegi\\u00e3o,Brasil\",\"logo_url\":\"https://media.licdn.com/dms/image/C4D0BAQFp7rjJOWKGlw/company-logo_100_100/0/1651245959309?e=2147483647&v=beta&t=HCBuiMarFM1QddN1YlghO1hfD2fgkliTxXg7_VPNi2A\"},{\"starts_at\":{\"day\":1,\"month\":11,\"year\":2020},\"ends_at\":null,\"company\":\"Freelance\",\"company_linkedin_profile_url\":null,\"title\":\"Desenvolvedorwebfreelancer\",\"description\":\"Atua\\u00e7\\u00e3ocomodesenvolvedorwebfreelanceremempresardeSoftwarestaiscomo:HirixeGrt8Inova\\u00e7\\u00f5esetecnologia.Utilizandotecnologiascomo:Java,JSF,Javascript,Angular.\",\"location\":null,\"logo_url\":null},{\"starts_at\":{\"day\":1,\"month\":5,\"year\":2014},\"ends_at\":{\"day\":30,\"month\":9,\"year\":2019},\"company\":\"Superintend\\u00eanciadeInform\\u00e1tica-UFRN\",\"company_linkedin_profile_url\":\"https://br.linkedin.com/company/stiufrn\",\"title\":\"Analistadehelpdesk\",\"description\":\"SuporteaosUsu\\u00e1riosdosSig\\u2019s(Principalmente:SIGAA.\\nSigElei\\u00e7\\u00e3o,SigEventoseSigAdmin),atrav\\u00e9sdaan\\u00e1lisedechamados,\\natendimentostelef\\u00f4nicos,atendimentospresenciaiseatendimentopor\\ne-mail;Elabora\\u00e7\\u00e3odescriptsSQL(Postgresql)para:gerarrelat\\u00f3rios\\nsolicitadosporusu\\u00e1rios,cria\\u00e7\\u00e3odegruposdevotantesparaoSigElei\\u00e7\\u00e3o,\\ncria\\u00e7\\u00e3odegruposdecomunica\\u00e7\\u00e3oparaoSigAdmin.\",\"location\":null,\"logo_url\":\"https://media.licdn.com/dms/image/C4E0BAQF2u6dDa8iwEA/company-logo_100_100/0/1619543612791?e=2147483647&v=beta&t=XF76JiwFBqVLxqiayLVk_9IAXA_Gbi9oXxT-ciekO98\"}],\"education\":[{\"starts_at\":{\"day\":1,\"month\":1,\"year\":2008},\"ends_at\":{\"day\":31,\"month\":12,\"year\":2019},\"field_of_study\":\"EngenhariaEl\\u00e9trica\",\"degree_name\":\"Gradua\\u00e7\\u00e3o\",\"school\":\"UniversidadeFederaldoRioGrandedoNorte\",\"school_linkedin_profile_url\":\"https://br.linkedin.com/school/ufrn/\",\"description\":null,\"logo_url\":\"https://media.licdn.com/dms/image/C560BAQFe04mqmRZy0g/company-logo_100_100/0/1568064674419?e=2147483647&v=beta&t=ztOcrJgxOuFMnwmzxKH9NdYwZXiKWKxirY6cWkNHgRc\",\"grade\":null,\"activities_and_societies\":null},{\"starts_at\":{\"day\":1,\"month\":1,\"year\":2016},\"ends_at\":{\"day\":31,\"month\":12,\"year\":2018},\"field_of_study\":\"TecnologiadaInforma\\u00e7\\u00e3o\",\"degree_name\":\"T\\u00e9cnio\",\"school\":\"UniversidadeFederaldoRioGrandedoNorte\",\"school_linkedin_profile_url\":\"https://br.linkedin.com/school/ufrn/\",\"description\":null,\"logo_url\":\"https://media.licdn.com/dms/image/C560BAQFe04mqmRZy0g/company-logo_100_100/0/1568064674419?e=2147483647&v=beta&t=ztOcrJgxOuFMnwmzxKH9NdYwZXiKWKxirY6cWkNHgRc\",\"grade\":null,\"activities_and_societies\":null},{\"starts_at\":{\"day\":1,\"month\":1,\"year\":2018},\"ends_at\":null,\"field_of_study\":\"TecnologiadaInforma\\u00e7\\u00e3o\",\"degree_name\":null,\"school\":\"AluraCursosOnline\",\"school_linkedin_profile_url\":\"https://br.linkedin.com/school/aluracursos/\",\"description\":\"CursosLivresna\\u00e1readedesenvolvimentoweb:Java,JSF,BancodeDados,Linux,Python\",\"logo_url\":\"https://media.licdn.com/dms/image/C4D0BAQH9asE_b3_dgw/company-logo_100_100/0/1669690112973?e=2147483647&v=beta&t=rO0bBx9tRFOl1bVDJsAq27YYLcLAXyuaEmvtngqYpVo\",\"grade\":null,\"activities_and_societies\":null}],\"languages\":[\"English\"],\"accomplishment_organisations\":[],\"accomplishment_publications\":[],\"accomplishment_honors_awards\":[],\"accomplishment_patents\":[],\"accomplishment_courses\":[],\"accomplishment_projects\":[],\"accomplishment_test_scores\":[],\"volunteer_work\":[],\"certifications\":[],\"connections\":406,\"people_also_viewed\":[],\"recommendations\":[],\"activities\":[{\"title\":\"\\ud835\\uddd5\\ud835\\uddf2\\ud835\\uddd4\\ud835\\ude04\\ud835\\uddee\\ud835\\uddff\\ud835\\uddf2\\ud835\\uddfc\\ud835\\uddf3\\ud835\\uddea\\ud835\\uddf5\\ud835\\uddee\\ud835\\ude01\\ud835\\uddec\\ud835\\uddfc\\ud835\\ude02\\ud835\\udde6\\ud835\\uddf5\\ud835\\uddee\\ud835\\uddff\\ud835\\uddf2\\ud835\\uddea\\ud835\\uddf6\\ud835\\ude01\\ud835\\uddf5\\ud835\\uddd6\\ud835\\uddf5\\ud835\\uddee\\ud835\\ude01\\ud835\\uddda\\ud835\\udde3\\ud835\\udde7Inarecentincident,\\ud835\\udde6\\ud835\\uddee\\ud835\\uddfa\\ud835\\ude00\\ud835\\ude02\\ud835\\uddfb\\ud835\\uddf4\\ud835\\ude04\\ud835\\uddfc\\ud835\\uddff\\ud835\\uddf8\\ud835\\uddf2\\ud835\\uddff\\ud835\\ude00\\ud835\\uddf9\\ud835\\uddf2\\ud835\\uddee\\ud835\\uddf8\\ud835\\uddf2\\ud835\\uddf1\\u2026\",\"link\":\"https://www.linkedin.com/posts/rafael-ferraz-rodrigues_technology-softwareengineering-artificialintelligence-activity-7049752512840503296-CC4E\",\"activity_status\":\"CompartilhadoporRafaelFerrazRodrigues\"},{\"title\":\"\\ud835\\uddd5\\ud835\\uddf2\\ud835\\uddd4\\ud835\\ude04\\ud835\\uddee\\ud835\\uddff\\ud835\\uddf2\\ud835\\uddfc\\ud835\\uddf3\\ud835\\uddea\\ud835\\uddf5\\ud835\\uddee\\ud835\\ude01\\ud835\\uddec\\ud835\\uddfc\\ud835\\ude02\\ud835\\udde6\\ud835\\uddf5\\ud835\\uddee\\ud835\\uddff\\ud835\\uddf2\\ud835\\uddea\\ud835\\uddf6\\ud835\\ude01\\ud835\\uddf5\\ud835\\uddd6\\ud835\\uddf5\\ud835\\uddee\\ud835\\ude01\\ud835\\uddda\\ud835\\udde3\\ud835\\udde7Inarecentincident,\\ud835\\udde6\\ud835\\uddee\\ud835\\uddfa\\ud835\\ude00\\ud835\\ude02\\ud835\\uddfb\\ud835\\uddf4\\ud835\\ude04\\ud835\\uddfc\\ud835\\uddff\\ud835\\uddf8\\ud835\\uddf2\\ud835\\uddff\\ud835\\ude00\\ud835\\uddf9\\ud835\\uddf2\\ud835\\uddee\\ud835\\uddf8\\ud835\\uddf2\\ud835\\uddf1\\u2026\",\"link\":\"https://www.linkedin.com/posts/milanmilanovic_technology-softwareengineering-artificialintelligence-activity-7049667729519259648-yfaF\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"It'strue.Codecanbeperfect.Butwefirstneedthedefinitionofperfecttobeabletoreview.Iamonlyafraidwhatperfectmeansformedoes\\u2026\",\"link\":\"https://www.linkedin.com/posts/adrian-%F0%9F%9F%A3-b-b52348181_its-true-code-can-be-perfect-but-we-first-activity-7049282055347535872-ednR\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"MaisumdiadeestudoscomaAlurana#imers\\u00e3oJavacomosmestresferasdo#javaPauloSilveira,JacquelineOliveiraeAlexandreAquiles!Essa\\u2026\",\"link\":\"https://www.linkedin.com/posts/amanda-paiva-lino_imers%C3%A3ojava-java-activity-7047324984645447680-NK9D\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"OChatGPTpodesubstituirdesenvolvedoresdesoftware?Oscompiladoressubstitu\\u00edramemgrandeparteosprogramadoresdelinguagemassembly,mas\\u2026\",\"link\":\"https://www.linkedin.com/posts/rubenmarcus_o-chatgpt-pode-substituir-desenvolvedores-activity-7049155520573620224-8zgK\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"Ultimamentetenhocriadointeressepeloparadigmafuncionale,maisespecificamente,pelalinguagemElixir.Acabeimedeparandocomumaferramenta\\u2026\",\"link\":\"https://www.linkedin.com/posts/rafael-ferraz-rodrigues_use-elixir-directly-in-livebook-activity-7049093492198842368-5K-X\",\"activity_status\":\"CompartilhadoporRafaelFerrazRodrigues\"},{\"title\":\"There'sarightandawrongwaytoreverseanarrayinJavaScript.It'sasubtledifference.Butinthesecondexample,wespreadtheoriginalarray\\u2026\",\"link\":\"https://www.linkedin.com/posts/madsbrodt_theres-a-right-and-a-wrong-way-to-reverse-activity-7049004450190897152-rOnf\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"BusinesslogicistheultimatecenteroftheCleanArchitectureinyourReactapp.Here'showtodriveitsdevelopmentusingunittests:While\\u2026\",\"link\":\"https://www.linkedin.com/posts/niksumeiko_business-logic-is-the-ultimate-center-of-activity-7048952851833733120-8ou_\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"Ol\\u00e1pessoal,Hojeemdia,aintelig\\u00eanciaartificial(IA)est\\u00e1rapidamentetransformandoaformacomoasempresasoperamecomoosfuncion\\u00e1rios\\u2026\",\"link\":\"https://www.linkedin.com/posts/hayfrodrigo_intelig%C3%AAnciaartificial-transforma%C3%A7%C3%A3odigital-activity-7048794736307937281-AEsM\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"},{\"title\":\"Falaa\\u00eddev!Essepapodehardskill\\u00e9maneiroeseiquetugostabastante.Padr\\u00f5esdeprojeto,cleancode,testes,mensageria,bancodedadose\\u2026\",\"link\":\"https://www.linkedin.com/posts/fabricio-vallim-026aaa31_developer-softwaredeveloper-softwareengineer-activity-7048301297904590848-nl_C\",\"activity_status\":\"RafaelFerrazRodriguesgostou\"}],\"similarly_named_profiles\":[{\"name\":\"RafaelFerrazRodrigues\",\"link\":\"https://br.linkedin.com/in/rafael-ferraz-rodrigues-47354b174\",\"summary\":\"--\",\"location\":\"Brasil\"},{\"name\":\"RafaelRodriguesFerraz\",\"link\":\"https://br.linkedin.com/in/rafael-rodrigues-\",\"summary\":\"EstudantedeAn\\u00e1liseeDesenvolvimentodeSistemas\",\"location\":\"Barueri,SP\"},{\"name\":\"Rafaelrodriguesferraz\",\"link\":\"https://br.linkedin.com/in/rafael-rodrigues-ferraz-127490245\",\"summary\":\"--\",\"location\":\"Planaltina,DF\"},{\"name\":\"RafaelRodriguesferraz\",\"link\":\"https://br.linkedin.com/in/rafael-rodrigues-ferraz-a20639246\",\"summary\":\"--\",\"location\":\"Bras\\u00edlia,DF\"}],\"articles\":[],\"groups\":[],\"phone_numbers\":[],\"social_networking_services\":[],\"skills\":[],\"inferred_salary\":null,\"gender\":null,\"birth_date\":null,\"industry\":null,\"extra\":null,\"interests\":[],\"personal_emails\":[],\"personal_numbers\":[]}"
        // const {data} = await axios.get<LinkedinProfileOutput>('https://nubela.co/proxycurl/api/v2/linkedin',{
        //     headers: {'Authorization': 'Bearer ' + 'vodFZli8AKCsBICivAJhuA'},
        //     params: {
        //         url
        //     }
        // })
        // const input = JSON.parse(rawProfile)
        
        return JSON.parse(rawProfile) as LinkedinProfileOutput
        // console.log("PROFILE",profile)
        // return profileDataSource.getProfile('af48258e-d9f9-44ee-b6db-a5457dea0293')
         
        // return profileDataSource.saveProfile(profile)
        

        
           
    }
}
